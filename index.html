<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rent Bill Generator</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.2/html2pdf.bundle.min.js"></script>
    <style>
        /* Basic Styling */
        body {
            font-family: 'Roboto', sans-serif;
            background-color: #e3f2fd;
            margin: 0;
            padding: 20px;
        }
        .container, .bill-container {
            background-color: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }
        input, select, button {
            width: 100%;
            padding: 8px;
            margin: 5px 0 15px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }
        button {
            background-color: #1976d2;
            color: #fff;
            border: none;
            cursor: pointer;
        }
        button:hover {
            background-color: #1565c0;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        th, td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        .total {
            font-weight: bold;
            background-color: #bbdefb;
        }
        .hidden {
            display: none;
        }
    </style>
</head>
<body>

    <h2>Rent Bill Generator</h2>

    <div class="container">
        <input type="text" id="tenant_name" placeholder="Tenant Name" required>
        <select id="billing_month">
            <option value="" disabled selected>Select Billing Month</option>
            <option>January</option>
            <option>February</option>
            <option>March</option>
            <option>April</option>
            <option>May</option>
            <option>June</option>
            <option>July</option>
            <option>August</option>
            <option>September</option>
            <option>October</option>
            <option>November</option>
            <option>December</option>
        </select>

        <h3>Electricity</h3>
        <input type="number" id="elec_prev" placeholder="Previous Reading" value="0">
        <input type="number" id="elec_curr" placeholder="Current Reading" value="0">
        <input type="number" id="elec_unit_charge" placeholder="Unit Charge (₹)" value="0">

        <h3>Pump Charges</h3>
        <div class="optional">
            <input type="checkbox" id="include_pump" onchange="toggleSection('pump_section', this)">
            <label for="include_pump">Include Pump Charges</label>
        </div>
        <div id="pump_section" class="hidden">
            <input type="number" id="pump_prev" placeholder="Previous Reading" value="0">
            <input type="number" id="pump_curr" placeholder="Current Reading" value="0">
            <input type="number" id="pump_unit_charge" placeholder="Unit Charge (₹)" value="0">
            <input type="number" id="num_people" placeholder="Number of People Sharing" value="1">
        </div>

        <h3>Additional Room</h3>
        <div class="optional">
            <input type="checkbox" id="include_room" onchange="toggleSection('room_section', this)">
            <label for="include_room">Include Additional Room Charges</label>
        </div>
        <div id="room_section" class="hidden">
            <input type="text" id="room_name" placeholder="Room Name (Optional)">
            <input type="number" id="room_prev" placeholder="Previous Reading" value="0">
            <input type="number" id="room_curr" placeholder="Current Reading" value="0">
            <input type="number" id="room_unit_charge" placeholder="Unit Charge (₹)" value="0">
        </div>

        <h3>Rent & Adjustments</h3>
        <input type="number" id="rent_amount" placeholder="Rent (₹)" value="0">
        <input type="number" id="prev_due" placeholder="Previous Due (₹)" value="0">
        <input type="number" id="prev_advance" placeholder="Previous Advance (₹)" value="0">

        <button onclick="generateBill()">Generate Bill</button>
    </div>

    <div id="bill" class="bill-container hidden">
        <div class="bill-header">
            <h3>Rent Bill Receipt</h3>
            <p><strong>Tenant:</strong> <span id="bill_tenant"></span></p>
            <p><strong>Month:</strong> <span id="bill_month"></span></p>
        </div>

        <h3>Calculation Details</h3>
        <p id="elec_calc"></p>
        <p id="pump_calc" class="hidden"></p>
        <p id="room_calc" class="hidden"></p>

        <h3>Bill Breakdown</h3>
        <table>
            <tr>
                <th>Description</th>
                <th>Amount (₹)</th>
            </tr>
            <tr>
                <td>Unit Charges</td>
                <td id="unit_amount"></td>
            </tr>
            <tr>
                <td>Rent</td>
                <td id="rent_display"></td>
            </tr>
            <tr>
                <td>Previous Due</td>
                <td id="due_display"></td>
            </tr>
            <tr>
                <td>Previous Advance</td>
                <td id="advance_display"></td>
            </tr>
            <tr class="total">
                <td>Total</td>
                <td id="total_amount"></td>
            </tr>
        </table>
    </div>

    <script>
        function toggleSection(sectionId, checkbox) {
            document.getElementById(sectionId).classList.toggle('hidden', !checkbox.checked);
        }

        function generateBill() {
            const getVal = (id) => parseFloat(document.getElementById(id).value) || 0;

            const elecCharge = (getVal('elec_curr') - getVal('elec_prev')) * getVal('elec_unit_charge');
            const pumpCharge = document.getElementById('include_pump').checked ? ((getVal('pump_curr') - getVal('pump_prev')) * getVal('pump_unit_charge') / getVal('num_people')) : 0;
            const roomCharge = document.getElementById('include_room').checked ? ((getVal('room_curr') - getVal('room_prev')) * getVal('room_unit_charge')) : 0;

            const totalUnitCharge = elecCharge + pumpCharge + roomCharge;
            const totalBill = totalUnitCharge + getVal('rent_amount') + getVal('prev_due') - getVal('prev_advance');

            document.getElementById('elec_calc').textContent = `Electricity: ₹${elecCharge.toFixed(2)}`;
            document.getElementById('pump_calc').textContent = pumpCharge ? `Pump: ₹${pumpCharge.toFixed(2)}` : '';
            document.getElementById('room_calc').textContent = roomCharge ? `Room: ₹${roomCharge.toFixed(2)}` : '';

            document.getElementById('unit_amount').textContent = `₹${totalUnitCharge.toFixed(2)}`;
            document.getElementById('total_amount').textContent = `₹${totalBill.toFixed(2)}`;

            document.getElementById('bill').classList.remove('hidden');
        }
    </script>

</body>
</html>
