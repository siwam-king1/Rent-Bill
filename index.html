<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rent Bill Generator</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.2/html2pdf.bundle.min.js"></script>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background-color: #f4f4f4;
            padding: 20px;
            margin: 0;
        }

        .container {
            background-color: #fff;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);
            max-width: 800px;
            margin: auto;
            font-family: 'Arial', sans-serif;
        }

        h2 {
            font-family: 'Georgia', serif;
            color: #333;
            text-align: center;
            margin-bottom: 30px;
        }

        input, select, button {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
            border: 1px solid #ccc;
            font-size: 16px;
        }

        button {
            background-color: #4CAF50;
            color: white;
            border: none;
            cursor: pointer;
        }

        button:hover {
            background-color: #45a049;
        }

        .bill-container {
            background-color: #e0f7fa; /* Sky Blue Theme */
            padding: 20px;
            border: 2px solid #333;
            margin-top: 30px;
            display: none;
            font-family: 'Georgia', serif;
        }

        .bill-header {
            text-align: center;
            margin-bottom: 20px;
        }

        .bill-header h3 {
            margin: 0;
            font-size: 24px;
        }

        .bill-header p {
            margin: 5px 0;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        th, td {
            padding: 12px;
            border: 1px solid #ddd;
            text-align: right;
            font-size: 16px;
        }

        th {
            background-color: #f2f2f2;
        }

        .total {
            background-color: #e9ffe9;
            font-weight: bold;
            font-size: 18px;
        }

        .monospace {
            font-family: 'Courier New', monospace;
            font-size: 14px;
        }

        .optional {
            display: flex;
            align-items: center;
        }

        .optional label {
            margin-left: 10px;
        }

        .calculation-details {
            display: none;
            margin-top: 20px;
        }

        .show-calculations:checked + .calculation-details {
            display: block;
        }
    </style>
</head>
<body>

    <h2>Rent Bill Generator</h2>

    <div class="container">
        <input type="text" id="tenant_name" placeholder="Tenant Name" required>
        <select id="billing_month">
            <option value="" disabled selected>Select Billing Month</option>
            <option>January</option>
            <option>February</option>
            <option>March</option>
            <option>April</option>
            <option>May</option>
            <option>June</option>
            <option>July</option>
            <option>August</option>
            <option>September</option>
            <option>October</option>
            <option>November</option>
            <option>December</option>
        </select>

        <h3>Electricity</h3>
        <input type="number" id="elec_prev" placeholder="Previous Reading">
        <input type="number" id="elec_curr" placeholder="Current Reading">
        <input type="number" id="elec_unit_charge" placeholder="Unit Charge (₹)">

        <h3>Pump Charges</h3>
        <div class="optional">
            <input type="checkbox" id="include_pump" class="show-calculations">
            <label for="include_pump">Include Pump Charges</label>
        </div>
        <div class="calculation-details">
            <input type="number" id="pump_prev" placeholder="Previous Reading">
            <input type="number" id="pump_curr" placeholder="Current Reading">
            <input type="number" id="pump_unit_charge" placeholder="Unit Charge (₹)">
            <input type="number" id="num_people" placeholder="Number of People Sharing">
        </div>

        <h3>Rent & Adjustments</h3>
        <input type="number" id="rent_amount" placeholder="Rent (₹)">
        <input type="number" id="prev_due" placeholder="Previous Due (₹)" value="0">
        <input type="number" id="prev_advance" placeholder="Previous Advance (₹)" value="0">

        <h3>Additional Room (Optional)</h3>
        <div class="optional">
            <input type="checkbox" id="include_room" class="show-calculations">
            <label for="include_room">Include Additional Room Charges</label>
        </div>
        <div class="calculation-details">
            <input type="text" id="room_name" placeholder="Room Name (Optional)">
            <input type="number" id="room_prev" placeholder="Room Previous Reading">
            <input type="number" id="room_curr" placeholder="Room Current Reading">
            <input type="number" id="room_unit_charge" placeholder="Room Unit Charge (₹)">
        </div>

        <button onclick="generateBill()">Generate Bill</button>
        <button onclick="downloadPDF()">Download PDF</button>
    </div>

    <div id="bill" class="bill-container">
        <div class="bill-header">
            <h3>Rent Bill Receipt</h3>
            <p><strong>Tenant:</strong> <span id="bill_tenant"></span></p>
            <p><strong>Month:</strong> <span id="bill_month"></span></p>
        </div>

        <h3>Calculation Details</h3>
        <p><strong>Electricity Calculation:</strong> <span id="elec_calc" class="monospace"></span></p>
        <p><strong>Pump Calculation:</strong> <span id="pump_calc" class="monospace"></span></p>
        <p><strong>Additional Room Calculation:</strong> <span id="room_calc" class="monospace"></span></p>

        <h3>Bill Breakdown</h3>
        <table>
            <tr>
                <th>Description</th>
                <th>Amount (₹)</th>
            </tr>
            <tr>
                <td>Unit Charges</td>
                <td id="unit_amount"></td>
            </tr>
            <tr>
                <td>Rent</td>
                <td id="rent_display"></td>
            </tr>
            <tr>
                <td>Previous Due</td>
                <td id="due_display"></td>
            </tr>
            <tr>
                <td>Previous Advance</td>
                <td id="advance_display"></td>
            </tr>
            <tr class="total">
                <td>Total</td>
                <td id="total_amount"></td>
            </tr>
        </table>
    </div>

    <script>
        document.getElementById('include_pump').addEventListener('change', function () {
            const isChecked = this.checked;
            document.getElementById('pump_prev').disabled = !isChecked;
            document.getElementById('pump_curr').disabled = !isChecked;
            document.getElementById('pump_unit_charge').disabled = !isChecked;
            document.getElementById('num_people').disabled = !isChecked;
        });

        document.getElementById('include_room').addEventListener('change', function () {
            const isChecked = this.checked;
            document.getElementById('room_name').disabled = !isChecked;
            document.getElementById('room_prev').disabled = !isChecked;
            document.getElementById('room_curr').disabled = !isChecked;
            document.getElementById('room_unit_charge').disabled = !isChecked;
        });

        function generateBill() {
            const tenantName = document.getElementById('tenant_name').value;
            const billingMonth = document.getElementById('billing_month').value;

            const elecPrev = parseFloat(document.getElementById('elec_prev').value);
            const elecCurr = parseFloat(document.getElementById('elec_curr').value);
            const elecUnitCharge = parseFloat(document.getElementById('elec_unit_charge').value);
            const elecBill = (elecCurr - elecPrev) * elecUnitCharge;

            let pumpBill = 0;
            if (document.getElementById('include_pump').checked) {
                const pumpPrev = parseFloat(document.getElementById('pump_prev').value);
                const pumpCurr = parseFloat(document.getElementById('pump_curr').value);
                const pumpUnitCharge = parseFloat(document.getElementById('pump_unit_charge').value);
                const numPeople = parseInt(document.getElementById('num_people').value);
                pumpBill = ((pumpCurr - pumpPrev) * pumpUnitCharge) / numPeople;
            }

            let roomBill = 0;
            if (document.getElementById('include_room').checked) {
                const roomName = document.getElementById('room_name').value;
                const roomPrev = parseFloat(document.getElementById('room_prev').value);
                const roomCurr = parseFloat(document.getElementById('room_curr').value);
                const roomUnitCharge = parseFloat(document.getElementById('room_unit_charge').value);
                roomBill = (roomCurr - roomPrev) * roomUnitCharge;
            }

            const rentAmount = parseFloat(document.getElementById('rent_amount').value);
            const prevDue = parseFloat(document.getElementById('prev_due').value);
            const prevAdvance = parseFloat(document.getElementById('prev_advance').value);

            const unitCharges = elecBill + pumpBill + roomBill;
            const totalBill = unitCharges + rentAmount + prevDue - prevAdvance;

            document.getElementById('bill_tenant').textContent = tenantName;
            document.getElementById('bill_month').textContent = billingMonth;

            document.getElementById('elec_calc').textContent = `(${elecCurr} - ${elecPrev}) × ${elecUnitCharge} = ₹${elecBill.toFixed(2)}`;
            document.getElementById('pump_calc').textContent = `(${pumpCurr} - ${pumpPrev}) × ${pumpUnitCharge} / ${numPeople} = ₹${pumpBill.toFixed(2)}`;
            document.getElementById('room_calc').textContent = `(${roomCurr} - ${roomPrev}) × ${roomUnitCharge} = ₹${roomBill.toFixed(2)}`;

            document.getElementById('unit_amount').textContent = `₹${unitCharges.toFixed(2)}`;
            document.getElementById('rent_display').textContent = `₹${rentAmount.toFixed(2)}`;
            document.getElementById('due_display').textContent = `₹${prevDue.toFixed(2)}`;
            document.getElementById('advance_display').textContent = `₹${prevAdvance.toFixed(2)}`;
            document.getElementById('total_amount').textContent = `₹${totalBill.toFixed(2)}`;

            document.getElementById('bill').style.display = 'block';
        }

        function downloadPDF() {
            const element = document.getElementById('bill');
            html2pdf(element);
        }
    </script>
</body>
</html>
